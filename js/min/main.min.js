"use strict";document.addEventListener("DOMContentLoaded",function(){!function(){!1===WEBGL.isWebGLAvailable()&&doument.body.appendChild(WebGL.getWebGLErrorMessage());var m,w,h,l,t=window.innerWidth/2,n=window.innerHeight/2;function E(){w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight)}function c(e){.5*(e.clientX-t),.5*(e.clientY-n)}(function(){m=document.getElementById("topAnimationApp"),(w=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,10)).position.z=5,h=new THREE.Scene;var e=new THREE.Vector4,t=[],n=[],i=[],r=[],a=[];t.push(.025,-.025,0),t.push(-.025,.025,0),t.push(0,0,.025);for(var o=0;o<5e3;o++)n.push(.1,.5,1),i.push(Math.random(),Math.random(),Math.random(),Math.random()),e.set(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1,2*Math.random()-1),e.normalize(),r.push(e.x,e.y,e.z,e.w),e.set(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1,2*Math.random()-1),e.normalize(),a.push(e.x,e.y,e.z,e.w);var d=new THREE.InstancedBufferGeometry;d.maxInstancedCount=5e3,d.addAttribute("position",new THREE.Float32BufferAttribute(t,3)),d.addAttribute("offset",new THREE.InstancedBufferAttribute(new Float32Array(n),3)),d.addAttribute("color",new THREE.InstancedBufferAttribute(new Float32Array(i),4)),d.addAttribute("orientationStart",new THREE.InstancedBufferAttribute(new Float32Array(r),4)),d.addAttribute("orientationEnd",new THREE.InstancedBufferAttribute(new Float32Array(a),4));var u=new THREE.RawShaderMaterial({uniforms:{time:{value:1},sineTime:{value:1}},vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,side:THREE.DoubleSide,transparent:!0}),s=new THREE.Mesh(d,u);if(h.add(s),(l=new THREE.WebGLRenderer).setPixelRatio(window.devicePixelRatio),l.setSize(window.innerWidth,window.innerHeight),l.setClearColor(16316664),m.appendChild(l.domElement),null===l.extensions.get("ANGLE_instanced_arrays"))return document.getElementById("notSupported").style.display="";document.addEventListener("mousemove",c,!1),window.addEventListener("resize",E,!1)})(),function e(){requestAnimationFrame(e);t=performance.now(),n=h.children[0],w.lookAt(h.position),n.rotation.y=2e-4*t,n.material.uniforms.time.value=.005*t,n.material.uniforms.sineTime.value=Math.sin(.01*n.material.uniforms.time.value),l.render(h,w);var t,n}()}()});